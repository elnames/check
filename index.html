<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Una Sorpresa Especial ğŸ’•</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK (solo para metadata) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <!-- BotÃ³n de omitir con PIN -->
    <button id="skip-btn" class="skip-btn">Omitir</button>

    <!-- Modal de PIN -->
    <div id="pin-modal" class="pin-modal">
        <div class="pin-modal-content">
            <h2 class="pin-title">Ingresa el PIN</h2>
            <p class="pin-subtitle">Para saltar a las fotos</p>
            <input type="password" id="pin-input" class="pin-input" maxlength="4" placeholder="****" inputmode="numeric">
            <div id="pin-error" class="pin-error"></div>
            <div class="pin-buttons">
                <button id="pin-submit" class="btn-pin-primary">Confirmar</button>
                <button id="pin-cancel" class="btn-pin-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Pantalla de bienvenida -->
        <div id="welcome-screen" class="screen active">
            <div class="heart-container">
                <div class="heart"></div>
                <div class="heart"></div>
                <div class="heart"></div>
            </div>
            <h1 class="title">Una Sorpresa Especial</h1>
            <p class="subtitle">Tengo algo muy importante que contarte...</p>
            <button id="start-btn" class="btn-primary">Empezar</button>
        </div>

        <!-- Pantalla de preguntas -->
        <div id="questions-screen" class="screen">
            <div class="questions-container">
                <div class="question-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p class="progress-text" id="progress-text">Pregunta 1 de 5</p>
                </div>
                
                <div class="rose-container">
                    <div class="rose"></div>
                </div>
                
                <h2 id="question-title">Para continuar, necesito que recuerdes...</h2>
                <p class="question-hint" id="question-hint">Â¿CuÃ¡l fue el primer lugar donde fuimos a comer juntos? ğŸ¤”</p>
                
                <div class="input-container">
                    <input type="text" id="question-input" placeholder="Escribe la respuesta aquÃ­..." maxlength="30">
                    <button id="question-submit-btn" class="btn-secondary">Continuar</button>
                </div>
                
                <div id="question-error-message" class="error-message"></div>
                <div id="question-success-message" class="success-message"></div>
            </div>
        </div>

        <!-- Pantalla de revelaciÃ³n -->
        <div id="reveal-screen" class="screen">
            <div class="reveal-container">
                <div class="confetti"></div>
                <div class="confetti"></div>
                <div class="confetti"></div>
                <div class="confetti"></div>
                <div class="confetti"></div>
                
                <h2 class="reveal-title">Â¡Correcto! ğŸ‰</h2>
                <p class="reveal-subtitle">Todos estos momentos son especiales para nosotros...</p>
                
                <!-- GalerÃ­a de fotos y videos -->
                <div class="photo-gallery">
                    <div class="gallery-item" onclick="openModal('img/foto_espejo_casa.jpg', 'Eres la luz de mis dÃ­as ğŸ’•', 'image')">
                        <img src="img/foto_espejo_casa.jpg" alt="Momento especial juntos" loading="lazy">
                        <div class="photo-overlay">Eres la luz de mis dÃ­as ğŸ’•</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/fotito_mano_uncle fletch.jpg', 'Contigo cada momento es mÃ¡gico âœ¨', 'image')">
                        <img src="img/fotito_mano_uncle fletch.jpg" alt="Momento especial juntos" loading="lazy">
                        <div class="photo-overlay">Contigo cada momento es mÃ¡gico âœ¨</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/fotito_linda.jpg', 'Tu sonrisa ilumina mi mundo ğŸŒŸ', 'image')">
                        <img src="img/fotito_linda.jpg" alt="Momento especial juntos" loading="lazy">
                        <div class="photo-overlay">Tu sonrisa ilumina mi mundo ğŸŒŸ</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/fotito_linda2.jpg', 'Juntos soÃ±amos en grande ğŸ’«', 'image')">
                        <img src="img/fotito_linda2.jpg" alt="Momento especial juntos" loading="lazy">
                        <div class="photo-overlay">Juntos soÃ±amos en grande ğŸ’«</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/fotito_linda3.jpg', 'Eres mi felicidad completa ğŸ’–', 'image')">
                        <img src="img/fotito_linda3.jpg" alt="Momento especial juntos" loading="lazy">
                        <div class="photo-overlay">Eres mi felicidad completa ğŸ’–</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/foto_fonda.jpg', 'Contigo todo es perfecto ğŸ¥°', 'image')">
                        <img src="img/foto_fonda.jpg" alt="Momento especial juntos" loading="lazy">
                        <div class="photo-overlay">Contigo todo es perfecto ğŸ¥°</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/foto_zapravka.jpg', 'Mi corazÃ³n late por ti ğŸ’“', 'image')">
                        <img src="img/foto_zapravka.jpg" alt="Momento especial juntos" loading="lazy">
                        <div class="photo-overlay">Mi corazÃ³n late por ti ğŸ’“</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/paris_londres.jpg', 'Eres mi razÃ³n de sonreÃ­r ğŸ˜Š', 'image')">
                        <img src="img/paris_londres.jpg" alt="Momento especial juntos" loading="lazy">
                        <div class="photo-overlay">Eres mi razÃ³n de sonreÃ­r ğŸ˜Š</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/Fotito_paris_londres.jpg', 'Juntos creamos recuerdos Ãºnicos ğŸ’', 'image')">
                        <img src="img/Fotito_paris_londres.jpg" alt="Momento especial juntos" loading="lazy">
                        <div class="photo-overlay">Juntos creamos recuerdos Ãºnicos ğŸ’</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/gabi_acostada.jpg', 'Tu amor es mi mayor tesoro ğŸ’', 'image')">
                        <img src="img/gabi_acostada.jpg" alt="Momento especial juntos" loading="lazy">
                        <div class="photo-overlay">Tu amor es mi mayor tesoro ğŸ’</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/subte.jpg', 'Contigo siento que puedo volar ğŸ•Šï¸', 'image')">
                        <img src="img/subte.jpg" alt="Momento especial juntos" loading="lazy">
                        <div class="photo-overlay">Contigo siento que puedo volar ğŸ•Šï¸</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/primera_salida_vuelta.jpg', 'Eres mi estrella brillante â­', 'image')">
                        <img src="img/primera_salida_vuelta.jpg" alt="Momento especial juntos" loading="lazy">
                        <div class="photo-overlay">Eres mi estrella brillante â­</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/video_uncle_fletch.mp4', 'Momentos Ãºnicos contigo ğŸ¥°', 'video')">
                        <video muted autoplay loop playsinline webkit-playsinline preload="metadata">
                            <source src="img/video_uncle_fletch.mp4" type="video/mp4">
                        </video>
                        <div class="photo-overlay">Momentos Ãºnicos contigo ğŸ¥°</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/video_uncle_fletch2.mp4', 'Risas que llenan mi alma ğŸ˜„', 'video')">
                        <video muted autoplay loop playsinline webkit-playsinline preload="metadata">
                            <source src="img/video_uncle_fletch2.mp4" type="video/mp4">
                        </video>
                        <div class="photo-overlay">Risas que llenan mi alma ğŸ˜„</div>
                    </div>
                    <div class="gallery-item" onclick="openModal('img/video_auto.mp4', 'Recuerdos que atesoro ğŸ’–', 'video')">
                        <video muted autoplay loop playsinline webkit-playsinline preload="metadata">
                            <source src="img/video_auto.mp4" type="video/mp4">
                        </video>
                        <div class="photo-overlay">Recuerdos que atesoro ğŸ’–</div>
                    </div>
                    <!-- BotÃ³n para agregar nuevo recuerdo (cuadrado con +) -->
                    <div class="gallery-item add-memory-btn" onclick="openUploadModal()">
                        <div class="add-memory-icon">
                            <span class="plus-icon">+</span>
                            <p class="add-memory-text">Agregar Recuerdo</p>
                        </div>
                    </div>
                </div>
                
                <button id="show-tickets-btn" class="btn-primary">Ver Videos Especiales</button>
            </div>
        </div>


        <!-- Pantalla de videos especiales -->
        <div id="special-videos-screen" class="screen">
            <div class="special-videos-container">
                <div class="ticket-glow"></div>
                
                <!-- Videos especiales -->
                <div class="videos-container">
                    <div class="special-videos-main">
                        <div class="special-video-container">
                            <video class="special-video" controls autoplay muted loop playsinline webkit-playsinline preload="metadata">
                                <source src="img/el_dia_que_nos_conocimos_y_nuestro_primer_beso.mp4" type="video/mp4">
                                Tu navegador no soporta videos.
                            </video>
                            <p class="video-caption">"El dÃ­a que nos conocimos y nuestro primer beso..." ğŸ’•</p>
                        </div>
                        
                        <div class="special-video-container">
                            <video class="special-video" controls autoplay muted loop playsinline webkit-playsinline preload="metadata">
                                <source src="img/el_dia_que_volviste.mp4" type="video/mp4">
                                Tu navegador no soporta videos.
                            </video>
                            <p class="video-caption">"El dÃ­a que volviste de Europa, mi corazÃ³n se llenÃ³ de alegrÃ­a..." ğŸ’•</p>
                        </div>
                        
                        <div class="special-video-container">
                            <video class="special-video" controls autoplay muted loop playsinline webkit-playsinline preload="metadata">
                                <source src="img/completo_gabi.mp4" type="video/mp4">
                                Tu navegador no soporta videos.
                            </video>
                            <p class="video-caption">"Momentos Ãºnicos juntos..." ğŸ’•</p>
                        </div>
                    </div>
                </div>
                
                <div class="message-container">
                    <p class="special-message">
                        DespuÃ©s de recordar todos estos bellos momentos juntos, tengo algo muy especial que preguntarte... ğŸ’•
                    </p>
                </div>

                <button id="show-confirmation-btn" class="btn-primary">Ver mi Sorpresa Final</button>
                <button id="back-from-special-videos-btn" class="btn-secondary" style="margin-top: 15px;">Volver</button>
            </div>
        </div>

        <!-- Pantalla de confirmaciÃ³n -->
        <div id="confirmation-screen" class="screen">
            <div class="confirmation-container">
                <div class="heart-container">
                    <div class="heart"></div>
                    <div class="heart"></div>
                    <div class="heart"></div>
                </div>
                
                <h2 class="confirmation-title">Â¿QuÃ© respondiste? ğŸ’•</h2>
                
                <div class="confirmation-buttons">
                    <button id="yes-btn" class="btn-primary">Â¡SÃ! ğŸ’•</button>
                    <button id="si-btn" class="btn-primary">Si ğŸ’•</button>
                </div>
                <button id="back-from-confirmation-btn" class="btn-secondary" style="margin-top: 25px;">Volver</button>
            </div>
        </div>

        <!-- Pantalla de entradas -->
        <div id="tickets-screen" class="screen">
            <div class="tickets-container">
                <div class="ticket-glow"></div>
                
                <div class="message-container">
                    <p class="special-message">
                        Esperando que me hayas dicho que sÃ­ jajaj... ğŸ’•
                    </p>
                </div>
                
                <h2 class="tickets-title">Â¡ENTRADAS ESPECIALES! ğŸµ</h2>
                
                <div class="ticket-card">
                    <div class="ticket-header">
                        <div class="ticket-icon">ğŸ«</div>
                        <h3>HSU SuperKlub</h3>
                    </div>
                    <div class="ticket-content">
                        <div class="ticket-info">
                            <div class="ticket-details">
                                <p><strong>Evento:</strong> HSU SuperKlub</p>
                                <p><strong>Para:</strong>  Nosotros ğŸ’•</p>
                                <p><strong>Fecha:</strong> 10 de enero 2026</p>
                                <p><strong>Incluye:</strong> Una noche inolvidable juntos</p>
                            </div>
                            <div class="ticket-actions">
                                <button class="download-btn" onclick="downloadPDF('docs/ETICKET Superklub.pdf')">
                                    ğŸ“„ Descargar PDF de Superklub
                                </button>
                            </div>
                        </div>
                        <div class="ticket-qr">
                            <div class="qr-container" onclick="showQR('img/QR SUPERKLUB.png', 'QR Superklub')">
                                <img src="img/QR SUPERKLUB.png" alt="QR Superklub" class="qr-image">
                                <div class="qr-overlay">
                                    <span class="qr-text">ğŸ” Toca para ver</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="ticket-card">
                    <div class="ticket-header">
                        <div class="ticket-icon">ğŸ«</div>
                        <h3>Creamfields 2025</h3>
                    </div>
                    <div class="ticket-content">
                        <div class="ticket-info">
                            <div class="ticket-details">
                                <p><strong>Evento:</strong> Creamfields Chile 2025</p>
                                <p><strong>Para:</strong> Para mi Polola ğŸ’•</p>
                                <p><strong>Fecha:</strong> 11 de octubre 2025</p>
                                <p><strong>Incluye:</strong> Una experiencia Ã©pica</p>
                            </div>
                            <div class="ticket-actions">
                                <button class="download-btn" onclick="downloadPDF('docs/ETICKET creamfields.pdf')">
                                    ğŸ“„ Descargar PDF de Creamfields
                                </button>
                            </div>
                            <div class="ticket-footer">
                                <p class="romantic-message">
                                    "Quiero que disfrutes de la mejor mÃºsica, porque te mereces lo mejor" ğŸ¶ğŸ’•
                                </p>
                            </div>
                        </div>
                        <div class="ticket-qr">
                            <div class="qr-container" onclick="showQR('img/QR Creamfields.png', 'QR Creamfields')">
                                <img src="img/QR Creamfields.png" alt="QR Creamfields" class="qr-image">
                                <div class="qr-overlay">
                                    <span class="qr-text">ğŸ” Toca para ver</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                

                <button id="restart-btn" class="btn-secondary">Volver a empezar</button>
                <button id="back-from-tickets-btn" class="btn-secondary" style="margin-top: 15px;">Volver</button>
            </div>
        </div>
    </div>

    <!-- Modal para ver fotos/videos en grande -->
    <div id="imageModal" class="modal">
        <span class="close">&times;</span>
        <img id="modalImage" class="modal-content" src="" alt="">
        <video id="modalVideo" class="modal-content" controls style="display: none;">
            <source src="" type="video/mp4">
        </video>
        <div id="modalCaption" class="modal-caption"></div>
    </div>

    <!-- Modal para subir nuevo recuerdo -->
    <div id="uploadModal" class="upload-modal">
        <div class="upload-modal-content">
            <span class="close-upload" onclick="closeUploadModal()">&times;</span>
            <h2 class="upload-modal-title">Â¿Quieres agregar un recuerdo especial? ğŸ“¸</h2>
            <div class="upload-modal-form">
                <div class="file-input-container">
                    <input type="file" id="media-upload" accept="image/*,video/*" class="upload-input">
                    <label for="media-upload" class="file-label">
                        <span class="file-icon">ğŸ“</span>
                        <span class="file-text">Seleccionar archivo</span>
                    </label>
                </div>
                
                <!-- PrevisualizaciÃ³n del archivo -->
                <div id="preview-container" class="preview-container" style="display: none;">
                    <img id="preview-image" class="preview-media" style="display: none;" alt="Vista previa">
                    <video id="preview-video" class="preview-media" controls playsinline style="display: none;"></video>
                    <button class="remove-preview" onclick="removePreview()">âœ• Quitar</button>
                </div>
                
                <input type="text" id="media-caption" placeholder="TÃ­tulo (opcional)..." class="upload-caption" maxlength="50">
                <button id="add-media-btn" class="btn-upload-modal">Agregar Recuerdo ğŸ’•</button>
            </div>
        </div>
    </div>

    <script src="firebase-config.js"></script>
    <script src="cloudinary-config.js"></script>
    <script src="script.js?v=23"></script>
</body>
</html>
